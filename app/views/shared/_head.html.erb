
<title><%= page_title %></title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<%= csrf_meta_tags %>
<%= csp_meta_tag %>

<link rel="stylesheet" media="screen" href="/stylesheets/tailwind-f475bbe.css" />
<link rel="stylesheet" media="screen" href="/stylesheets/forms-f475bbe.css" />
<link rel="stylesheet" media="screen" href="/stylesheets/custom.css<%= cache_buster %>" />

<script src="/js/custom.js<%= cache_buster %>"></script>
<script src="/js/pusher.min-7.0.js"></script>
<script src="/js/htmx-1.8.0.js"></script>
<script src="/js/hyperscript.min-0.9.7.js"></script>
<script src="/js/popper-2.11.8.js"></script>
<script src="/js/tippy-6.3.7.js"></script>
  
<% unless ENV["OFFLINE_DEV"].present? %>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;900&display=swap" rel="stylesheet">
  
  <script type="text/javascript">
    
    let client = new Pusher("<%= ENV['PUSHER_KEY'] %>", {
      wsHost: "<%= ENV['PUSHER_HOST'] %>",
      wsPort: 443,
      wssPort: 443,
      forceTLS: true,
      encrypted: true,
      disableStats: true,
      enabledTransports: ['ws', 'wss'],
    });

    <%- if user_signed_in? %>

      client.subscribe('user-toasts-<%= current_user.id.to_s %>').bind('new-toast', ({ content }) => {
        console.log(`Received: ${content}`);
        container = document.querySelector('.toasts-container')
        container.insertAdjacentHTML('afterbegin', content)
          _hyperscript.processNode(container)
      });

    <% end %>

  </script>

<% end %>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="apple-mobile-web-app-capable" content="yes">
